import json
import openai
from flask import Flask, request, jsonify

# openai.api_key = "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"
openai.api_key = "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"
def extract_ids(string):
    try:
        data = json.loads(string)
        ids = [item["id"] for item in data]
        return ids
    except (json.JSONDecodeError, KeyError):
        return []

def find_matching_data(ids, json_data):
    try:
        data = json.loads(json_data)
        matching_data = [item for item in data["data"] if item["id"] in ids]
        return matching_data
    except (json.JSONDecodeError, KeyError):
        return []


app = Flask(__name__)

@app.route('/api', methods=['POST'])
def process_request():
    # Extract request data
    request_data = request.json
    prompt = request_data.get('prompt')
    base_prompt= """
        I am a vehicle search engine. I will search vehicle based on following json input data. The model should iterate through the input json data, look for value of the json property and if it find any match then return that particular vehicle id in json format. If it does not find any match for a request, it should return an empty json data. For example, if I search for all blue color vehicle, it should iterate through the json input data, look for exterior_color property and return if it find a value blue. Similarly, if I search for vehicle with certain mileage, it should iterate through the json data, check mileage property and compare if the requested mileage is falling into that range or not, if it find a match return the vehicle id otherwise return empty json. ###
        Input data: ###
        {"data":[{"id":"-5895671319161974787","make":"Chevrolet","model":"Silverado 1500","body_style":"Pickup","exterior_color":"Black","vehicle_condition":"Used","year":2022,"mileage":19398,"price":48950},{"id":"5026406780478686116","make":"Infiniti","model":"QX60","body_style":"SUV","exterior_color":"Black","vehicle_condition":"CPO","year":2020,"mileage":23247,"price":36999},{"id":"314626933687442901","make":"Infiniti","model":"QX80","body_style":"SUV","exterior_color":"White","vehicle_condition":"Used","year":2022,"mileage":14814,"price":68900},{"id":"-4360754388345081817","make":"Ford","model":"Explorer","body_style":"SUV","exterior_color":"Gray","vehicle_condition":"Used","year":2020,"mileage":54569,"price":29973},{"id":"3717886903242235128","make":"Audi","model":"Q5","body_style":"SUV","exterior_color":"Silver","vehicle_condition":"Used","year":2021,"mileage":44001,"price":33969},{"id":"-8362009517356480123","make":"Kia","model":"Sorento","body_style":"SUV","exterior_color":"White","vehicle_condition":"CPO","year":2021,"mileage":58038,"price":25390},{"id":"-2286512900667743883","make":"Acura","model":"RDX","body_style":"SUV","exterior_color":"Gray","vehicle_condition":"Used","year":2014,"mileage":103323,"price":17995},{"id":"4097034971705450232","make":"Mercedes-Benz","model":"GLE","body_style":"SUV","exterior_color":"Gray","vehicle_condition":"Used","year":2020,"mileage":42176,"price":47999},{"id":"1803309884288364858","make":"GMC","model":"Terrain","body_style":"SUV","exterior_color":"White","vehicle_condition":"Used","year":2020,"mileage":60375,"price":25927},{"id":"7075332948536924587","make":"Jeep","model":"Cherokee","body_style":"SUV","exterior_color":"Red","vehicle_condition":"Used","year":2019,"mileage":56000,"price":21708},{"id":"7332810984067662190","make":"Honda","model":"CR-V","body_style":"SUV","exterior_color":"Red","vehicle_condition":"Used","year":2018,"mileage":98768,"price":23292},{"id":"4492267905857148706","make":"Honda","model":"Civic","body_style":"Coupe","exterior_color":"Black","vehicle_condition":"Used","year":2013,"mileage":104621,"price":12000},{"id":"-8205942642902667925","make":"Mercedes-Benz","model":"GLS","body_style":"SUV","exterior_color":"Silver","vehicle_condition":"Used","year":2020,"mileage":16253,"price":67800},{"id":"-2724725936011478536","make":"Infiniti","model":"QX80","body_style":"SUV","exterior_color":"Black","vehicle_condition":"Used","year":2016,"mileage":100414,"price":25499},{"id":"7646580422848858957","make":"Jeep","model":"Wrangler","body_style":"SUV","exterior_color":"Yellow","vehicle_condition":"Used","year":2019,"mileage":27918,"price":40998},{"id":"739322256270036901","make":"Toyota","model":"Corolla","body_style":"Hatchback","exterior_color":"Silver","vehicle_condition":"Used","year":2023,"mileage":5806,"price":25498},{"id":"5091859666035390759","make":"BMW","model":"3 Series","body_style":"Sedan","exterior_color":"Gray","vehicle_condition":"Used","year":2013,"mileage":99257,"price":11000},{"id":"-2441138484280971621","make":"Ford","model":"F-150","body_style":"Pickup","exterior_color":"Silver","vehicle_condition":"Used","year":2019,"mileage":78431,"price":35973},{"id":"-5336922274807791315","make":"Chevrolet","model":"Equinox","body_style":"SUV","exterior_color":"Silver","vehicle_condition":"CPO","year":2020,"mileage":13015,"price":26000},{"id":"5812709785351450485","make":"Chevrolet","model":"Colorado","body_style":"Pickup","exterior_color":"Blue","vehicle_condition":"Used","year":2020,"mileage":75150,"price":22577},{"id":"-6621809372632440308","make":"Subaru","model":"Ascent","body_style":"SUV","exterior_color":"Gray","vehicle_condition":"New","year":2023,"mileage":2,"price":46811},{"id":"3279770836407204030","make":"Jeep","model":"Wagoneer","body_style":"SUV","exterior_color":"Black","vehicle_condition":"New","year":2023,"mileage":4,"price":83122},{"id":"-4560067317642147256","make":"Ram","model":"1500","body_style":"Pickup","exterior_color":"White","vehicle_condition":"New","year":2023,"mileage":2,"price":77950},{"id":"-446043432847313615","make":"Chevrolet","model":"Bolt EUV","body_style":"SUV","exterior_color":"Blue","vehicle_condition":"New","year":2023,"mileage":2,"price":35790},{"id":"-4818566526041497498","make":"Jeep","model":"Gladiator","body_style":"Pickup","exterior_color":"Red","vehicle_condition":"New","year":2023,"mileage":10,"price":51790},{"id":"-3801414670992030520","make":"Jeep","model":"Grand Cherokee","body_style":"SUV","exterior_color":"Red","vehicle_condition":"New","year":2023,"mileage":5,"price":47430},{"id":"-2993940710374281343","make":"Ram","model":"1500","body_style":"Pickup","exterior_color":"Black","vehicle_condition":"New","year":2023,"mileage":5,"price":101180},{"id":"-7045136770526545217","make":"Ram","model":"1500","body_style":"Pickup","exterior_color":"White","vehicle_condition":"New","year":2023,"price":45575},{"id":"3945621369646748060","make":"Ford","model":"F-150","body_style":"Pickup","exterior_color":"Black","vehicle_condition":"New","year":2023,"price":48230},{"id":"-5748446695895238691","make":"Honda","model":"CR-V","body_style":"SUV","exterior_color":"Gray","vehicle_condition":"New","year":2023,"mileage":7,"price":35876},{"id":"3076293490382211747","make":"Subaru","model":"Forester","body_style":"SUV","exterior_color":"Green","vehicle_condition":"New","year":2023,"mileage":5,"price":38911},{"id":"4188919248409693870","make":"GMC","model":"Sierra 1500","body_style":"Pickup","exterior_color":"White","vehicle_condition":"New","year":2023,"mileage":2,"price":42925},{"id":"-6260235547947855909","make":"Jeep","model":"Grand Cherokee","body_style":"SUV","exterior_color":"Black","vehicle_condition":"New","year":2023,"price":43630},{"id":"1328306788217728868","make":"Jeep","model":"Gladiator","body_style":"Pickup","exterior_color":"Black","vehicle_condition":"New","year":2023,"price":47373},{"id":"4842373748135033396","make":"Subaru","model":"Ascent","body_style":"SUV","exterior_color":"Silver","vehicle_condition":"New","year":2023,"mileage":2,"price":46655},{"id":"4597235982606416850","make":"Subaru","model":"Ascent","body_style":"SUV","exterior_color":"Green","vehicle_condition":"New","year":2023,"mileage":8,"price":42520},{"id":"2423554251870492633","make":"Subaru","model":"Outback","body_style":"Wagon","exterior_color":"Blue","vehicle_condition":"New","year":2024,"mileage":7,"price":42700},{"id":"3644084718618933067","make":"Ram","model":"1500","body_style":"Pickup","exterior_color":"Black","vehicle_condition":"New","year":2023,"mileage":10,"price":59783},{"id":"-6948266371532344148","make":"Subaru","model":"Ascent","body_style":"SUV","exterior_color":"White","vehicle_condition":"New","year":2023,"mileage":2,"price":48346},{"id":"7650363564363900831","make":"Dodge","model":"Challenger","body_style":"Coupe","exterior_color":"Black","vehicle_condition":"New","year":2023,"mileage":5,"price":30800},{"id":"-4576333870327692383","make":"Chevrolet","model":"Traverse","body_style":"SUV","exterior_color":"Gray","vehicle_condition":"New","year":2023,"price":45295},{"id":"3870581139470513735","make":"Chevrolet","model":"Suburban","body_style":"SUV","exterior_color":"Black","vehicle_condition":"New","year":2023,"mileage":1,"price":83910},{"id":"-5919058550258187097","make":"Kia","model":"Soul","body_style":"Wagon","exterior_color":"Gray","vehicle_condition":"New","year":2023,"mileage":4,"price":26135},{"id":"-4855587414577851613","make":"Kia","model":"EV6","body_style":"SUV","exterior_color":"Blue","vehicle_condition":"New","year":2023,"mileage":15,"price":50550},{"id":"-5511671246644678398","make":"GMC","model":"Canyon","body_style":"Pickup","exterior_color":"Black","vehicle_condition":"New","year":2023,"mileage":2,"price":54805},{"id":"-7023442995322859274","make":"Chevrolet","model":"Silverado 1500","body_style":"Pickup","exterior_color":"Brown","vehicle_condition":"New","year":2023,"price":66890},{"id":"-2756452406958224279","make":"Chevrolet","model":"Tahoe","body_style":"SUV","exterior_color":"Black","vehicle_condition":"New","year":2023,"price":66990},{"id":"-8547364095261535065","make":"Kia","model":"Forte","body_style":"Sedan","exterior_color":"Black","vehicle_condition":"New","year":2023,"mileage":3,"price":21110},{"id":"-5479797038400680541","make":"Kia","model":"Niro","body_style":"SUV","exterior_color":"Black","vehicle_condition":"New","year":2023,"mileage":3,"price":28670},{"id":"3667649575214948866","make":"Kia","model":"Forte","body_style":"Sedan","exterior_color":"Orange","vehicle_condition":"New","year":2023,"mileage":9,"price":21315},{"id":"-3589431975058642788","make":"Nissan","model":"Rogue","body_style":"SUV","exterior_color":"Black","vehicle_condition":"New","year":2023,"price":37365},{"id":"-8015072294543079780","make":"Chevrolet","model":"Equinox","body_style":"SUV","exterior_color":"Black","vehicle_condition":"New","year":2023,"mileage":3,"price":28780},{"id":"-250796116143620565","make":"Ram","model":"1500","body_style":"Pickup","exterior_color":"Gray","vehicle_condition":"New","year":2023,"price":64458},{"id":"6455081926515488390","make":"Jeep","model":"Grand Cherokee","body_style":"SUV","exterior_color":"Red","vehicle_condition":"New","year":2023,"mileage":12,"price":40037},{"id":"8722176513116598104","make":"Infiniti","model":"QX80","body_style":"SUV","exterior_color":"Gray","vehicle_condition":"New","year":2023,"mileage":5,"price":90560},{"id":"3509559560612406876","make":"GMC","model":"Sierra 1500","body_style":"Pickup","exterior_color":"Red","vehicle_condition":"New","year":2023,"mileage":3,"price":50545},{"id":"-6501130464567925283","make":"Subaru","model":"Outback","body_style":"Wagon","exterior_color":"Gray","vehicle_condition":"New","year":2024,"mileage":7,"price":33280},{"id":"9097664163304538951","make":"Subaru","model":"Forester","body_style":"SUV","exterior_color":"Blue","vehicle_condition":"New","year":2023,"mileage":5,"price":38911},{"id":"3734425774397692385","make":"Subaru","model":"Ascent","body_style":"SUV","exterior_color":"Red","vehicle_condition":"New","year":2023,"mileage":2,"price":51131},{"id":"-7153817088100806555","make":"Subaru","model":"Forester","body_style":"SUV","exterior_color":"Green","vehicle_condition":"New","year":2023,"mileage":3,"price":39747},{"id":"4597991649198143926","make":"Volkswagen","model":"Jetta","body_style":"Sedan","exterior_color":"White","vehicle_condition":"Used","year":2020,"mileage":43299,"price":21477},{"id":"8695736304169807392","make":"Subaru","model":"Forester","body_style":"SUV","exterior_color":"Blue","vehicle_condition":"CPO","year":2022,"mileage":11692,"price":29043},{"id":"-6179833972011787469","make":"Subaru","model":"Outback","body_style":"Wagon","exterior_color":"Black","vehicle_condition":"Used","year":2020,"mileage":23615,"price":35000}]}
        Response format: ###
        [{"id": <String>}] ###

        Q: show me all orange car ###
        [{"id":"3667649575214948866"}]

        Q: show me all car price between 35800 and 40000 ###
        [{"id":"-274458240007713452"},{"id":"-8607259219994949633"}]

        Q: show me all red car with mileage between 10 and 19 ###
        [{"id":"6455081926515488390"}] 
        
        Q: show me all coupes
        [{"id":"7650363564363900831"},{"id":"4492267905857148706"}]
        
        """;
    new_prompt = base_prompt + "\nQ: " + prompt + ' ###'

    response = openai.ChatCompletion.create(
        # model="text-davinci-003",
        model="gpt-3.5-turbo",
        messages=[ # Change this
            {"role": "assistant", "content": new_prompt}
        ],
        # messages="[{""role"": ""user"", ""content"": " + new_prompt + "}]",
        temperature=0.3,
        max_tokens=100,
        top_p=1.0,
        frequency_penalty=0.0,
        presence_penalty=0.0
    )    
    print ("Response from OpenAI=",response);
    # Extract relevant information from OpenAI response
    vechile_response = response['choices'][0]['message']['content']
    vechile_ids = extract_ids (vechile_response)
    print ("Vehicle ids=", vechile_ids)
    json_data = """
        {"data":[{"id":"-5895671319161974787","vin":"1GCPDKEK1NZ563229","make":"Chevrolet","model":"Silverado 1500","trim":"LT","body_style":"Pickup","exterior_color":"Black","engine":"4 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"Used","year":2022,"mileage":19398,"price":48950,"imageUrl":"https://img.vast.com/apollo/-5895671319161974787/1/640x-"},{"id":"5026406780478686116","vin":"5N1DL0MM3LC525770","make":"Infiniti","model":"QX60","trim":"Luxe","body_style":"SUV","exterior_color":"Black","engine":"6 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"CPO","mpg_combined":22,"year":2020,"mileage":23247,"price":36999,"mpg_city":19,"mpg_highway":26,"imageUrl":"https://img.vast.com/apollo/5026406780478686116/1/640x-"},{"id":"314626933687442901","vin":"JN8AZ2BE6N9291710","make":"Infiniti","model":"QX80","trim":"Sensory","body_style":"SUV","exterior_color":"White","engine":"8 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":15,"year":2022,"mileage":14814,"price":68900,"mpg_city":13,"mpg_highway":19,"imageUrl":"https://img.vast.com/apollo/314626933687442901/1/640x-"},{"id":"-4360754388345081817","vin":"1FMSK8DH3LGA37097","make":"Ford","model":"Explorer","trim":"XLT","body_style":"SUV","exterior_color":"Gray","engine":"4 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":23,"year":2020,"mileage":54569,"price":29973,"mpg_city":20,"mpg_highway":27,"imageUrl":"https://img.vast.com/apollo/-4360754388345081817/1/640x-"},{"id":"3717886903242235128","vin":"WA1BAAFY5M2052091","make":"Audi","model":"Q5","trim":"Premium Plus","body_style":"SUV","exterior_color":"Silver","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"Used","year":2021,"mileage":44001,"price":33969,"imageUrl":"https://img.vast.com/apollo/3717886903242235128/1/640x-"},{"id":"-8362009517356480123","vin":"5XYRG4LCXMG016772","make":"Kia","model":"Sorento","trim":"LX","body_style":"SUV","exterior_color":"White","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"CPO","mpg_combined":26,"year":2021,"mileage":58038,"price":25390,"mpg_city":24,"mpg_highway":29,"imageUrl":"https://img.vast.com/apollo/-8362009517356480123/1/640x-"},{"id":"-2286512900667743883","vin":"5J8TB3H33EL015512","make":"Acura","model":"RDX","body_style":"SUV","exterior_color":"Gray","engine":"6 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":23,"year":2014,"mileage":103323,"price":17995,"mpg_city":20,"mpg_highway":28,"imageUrl":"https://img.vast.com/apollo/-2286512900667743883/1/640x-"},{"id":"4097034971705450232","vin":"4JGFB4JB7LA210763","make":"Mercedes-Benz","model":"GLE","trim":"350","body_style":"SUV","exterior_color":"Gray","engine":"4 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":22,"year":2020,"mileage":42176,"price":47999,"mpg_city":20,"mpg_highway":27,"imageUrl":"https://img.vast.com/apollo/4097034971705450232/1/640x-"},{"id":"1803309884288364858","vin":"3GKALPEX2LL100297","make":"GMC","model":"Terrain","trim":"SLT","body_style":"SUV","exterior_color":"White","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":24,"year":2020,"mileage":60375,"price":25927,"mpg_city":22,"mpg_highway":28,"imageUrl":"https://img.vast.com/apollo/1803309884288364858/1/640x-"},{"id":"7075332948536924587","vin":"1C4PJMLN5KD134041","make":"Jeep","model":"Cherokee","trim":"Latitude","body_style":"SUV","exterior_color":"Red","engine":"4 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"Used","year":2019,"mileage":56000,"price":21708,"imageUrl":"https://img.vast.com/apollo/7075332948536924587/1/640x-"},{"id":"7332810984067662190","vin":"2HKRW1H88JH501082","make":"Honda","model":"CR-V","trim":"EXL","body_style":"SUV","exterior_color":"Red","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":30,"year":2018,"mileage":98768,"price":23292,"mpg_city":28,"mpg_highway":34,"imageUrl":"https://img.vast.com/apollo/7332810984067662190/1/640x-"},{"id":"4492267905857148706","vin":"2HGFG3B84DH514348","make":"Honda","model":"Civic","trim":"EX","body_style":"Coupe","exterior_color":"Black","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":32,"year":2013,"mileage":104621,"price":12000,"mpg_city":28,"mpg_highway":39,"imageUrl":"https://img.vast.com/apollo/4492267905857148706/1/640x-"},{"id":"-8205942642902667925","vin":"4JGFF5KE6LA232210","make":"Mercedes-Benz","model":"GLS","trim":"450","body_style":"SUV","exterior_color":"Silver","engine":"6 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":21,"year":2020,"mileage":16253,"price":67800,"mpg_city":19,"mpg_highway":23,"imageUrl":"https://img.vast.com/apollo/-8205942642902667925/1/640x-"},{"id":"-2724725936011478536","vin":"JN8AZ2NC2G9400600","make":"Infiniti","model":"QX80","body_style":"SUV","exterior_color":"Black","engine":"8 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":16,"year":2016,"mileage":100414,"price":25499,"mpg_city":14,"mpg_highway":19,"imageUrl":"https://img.vast.com/apollo/-2724725936011478536/1/640x-"},{"id":"7646580422848858957","vin":"1C4HJXENXKW592875","make":"Jeep","model":"Wrangler","trim":"Sahara","body_style":"SUV","exterior_color":"Yellow","engine":"4 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":22,"year":2019,"mileage":27918,"price":40998,"mpg_city":22,"mpg_highway":24,"imageUrl":"https://img.vast.com/apollo/7646580422848858957/1/640x-"},{"id":"739322256270036901","vin":"JTND4MBE1P3191681","make":"Toyota","model":"Corolla","trim":"SE","body_style":"Hatchback","exterior_color":"Silver","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":35,"year":2023,"mileage":5806,"price":25498,"mpg_city":32,"mpg_highway":41,"imageUrl":"https://img.vast.com/apollo/739322256270036901/1/640x-"},{"id":"5091859666035390759","vin":"WBA3A5C51DF352776","make":"BMW","model":"3 Series","trim":"328i","body_style":"Sedan","exterior_color":"Gray","engine":"4 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":26,"year":2013,"mileage":99257,"price":11000,"mpg_city":23,"mpg_highway":33,"imageUrl":"https://img.vast.com/apollo/5091859666035390759/1/640x-"},{"id":"-2441138484280971621","vin":"1FTEW1E40KKE45710","make":"Ford","model":"F-150","trim":"XLT","body_style":"Pickup","exterior_color":"Silver","engine":"6 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"Used","year":2019,"mileage":78431,"price":35973,"imageUrl":"https://img.vast.com/apollo/-2441138484280971621/1/640x-"},{"id":"-5336922274807791315","vin":"3GNAXKEV2LL258258","make":"Chevrolet","model":"Equinox","trim":"LT","body_style":"SUV","exterior_color":"Silver","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"CPO","mpg_combined":28,"year":2020,"mileage":13015,"price":26000,"mpg_city":26,"mpg_highway":31,"imageUrl":"https://img.vast.com/apollo/-5336922274807791315/1/640x-"},{"id":"5812709785351450485","vin":"1GCHSAEA0L1194998","make":"Chevrolet","model":"Colorado","trim":"Base","body_style":"Pickup","exterior_color":"Blue","engine":"4 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":22,"year":2020,"mileage":75150,"price":22577,"mpg_city":20,"mpg_highway":26,"imageUrl":"https://img.vast.com/apollo/5812709785351450485/1/640x-"},{"id":"-6621809372632440308","vin":"4S4WMAUD1P3438001","make":"Subaru","model":"Ascent","trim":"Limited","body_style":"SUV","exterior_color":"Gray","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":21,"year":2023,"mileage":2,"price":46811,"mpg_city":19,"mpg_highway":25,"imageUrl":"https://img.vast.com/apollo/-6621809372632440308/1/640x-"},{"id":"3279770836407204030","vin":"1C4SJSDPXPS544075","make":"Jeep","model":"Wagoneer","trim":"Series III","body_style":"SUV","exterior_color":"Black","engine":"6 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":19,"year":2023,"mileage":4,"price":83122,"mpg_city":16,"mpg_highway":23,"imageUrl":"https://img.vast.com/apollo/3279770836407204030/1/640x-"},{"id":"-4560067317642147256","vin":"1C6SRFHT8PN528910","make":"Ram","model":"1500","trim":"Limited","body_style":"Pickup","exterior_color":"White","engine":"8 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":17,"year":2023,"mileage":2,"price":77950,"mpg_city":15,"mpg_highway":21,"imageUrl":"https://img.vast.com/apollo/-4560067317642147256/1/640x-"},{"id":"-446043432847313615","vin":"1G1FZ6S00P4161301","make":"Chevrolet","model":"Bolt EUV","trim":"Premier","body_style":"SUV","exterior_color":"Blue","engine":"Electric","transmission":"Automatic","drive_type":"FWD","fuel":"Electric","vehicle_condition":"New","mpg_combined":115,"year":2023,"mileage":2,"price":35790,"mpg_city":125,"mpg_highway":104,"imageUrl":"https://img.vast.com/apollo/-446043432847313615/1/640x-"},{"id":"-4818566526041497498","vin":"1C6HJTAGXPL555616","make":"Jeep","model":"Gladiator","trim":"Willys","body_style":"Pickup","exterior_color":"Red","engine":"6 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":19,"year":2023,"mileage":10,"price":51790,"mpg_city":17,"mpg_highway":22,"imageUrl":"https://img.vast.com/apollo/-4818566526041497498/1/640x-"},{"id":"-3801414670992030520","vin":"1C4RJKAGXP8872631","make":"Jeep","model":"Grand Cherokee","trim":"Laredo","body_style":"SUV","exterior_color":"Red","engine":"6 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":21,"year":2023,"mileage":5,"price":47430,"mpg_city":18,"mpg_highway":25,"imageUrl":"https://img.vast.com/apollo/-3801414670992030520/1/640x-"},{"id":"-2993940710374281343","vin":"1C6SRFU99PN564177","make":"Ram","model":"1500","trim":"TRX","body_style":"Pickup","exterior_color":"Black","engine":"8 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":12,"year":2023,"mileage":5,"price":101180,"mpg_city":10,"mpg_highway":14,"imageUrl":"https://img.vast.com/apollo/-2993940710374281343/1/640x-"},{"id":"-7045136770526545217","vin":"3C6RR6KG4PG620566","make":"Ram","model":"1500","trim":"Tradesman","body_style":"Pickup","exterior_color":"White","engine":"6 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":20,"year":2023,"price":45575,"mpg_city":17,"mpg_highway":25,"imageUrl":"https://img.vast.com/apollo/-7045136770526545217/1/640x-"},{"id":"3945621369646748060","vin":"1FTEW1C57PKE75306","make":"Ford","model":"F-150","trim":"XL","body_style":"Pickup","exterior_color":"Black","engine":"8 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Flexible-Fuel","vehicle_condition":"New","mpg_combined":20,"year":2023,"price":48230,"mpg_city":17,"mpg_highway":25,"imageUrl":"https://img.vast.com/apollo/3945621369646748060/1/640x-"},{"id":"-5748446695895238691","vin":"7FARS5H55PE010764","make":"Honda","model":"CR-V","trim":"Sport","body_style":"SUV","exterior_color":"Gray","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Hybrid","vehicle_condition":"New","mpg_combined":40,"year":2023,"mileage":7,"price":35876,"mpg_city":43,"mpg_highway":36,"imageUrl":"https://img.vast.com/apollo/-5748446695895238691/1/640x-"},{"id":"3076293490382211747","vin":"JF2SKAMC8PH471906","make":"Subaru","model":"Forester","trim":"Wilderness","body_style":"SUV","exterior_color":"Green","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":26,"year":2023,"mileage":5,"price":38911,"mpg_city":25,"mpg_highway":28,"imageUrl":"https://img.vast.com/apollo/3076293490382211747/1/640x-"},{"id":"4188919248409693870","vin":"1GTRHAED5PZ255556","make":"GMC","model":"Sierra 1500","trim":"Pro","body_style":"Pickup","exterior_color":"White","engine":"8 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Gasoline","vehicle_condition":"New","year":2023,"mileage":2,"price":42925,"imageUrl":"https://img.vast.com/apollo/4188919248409693870/1/640x-"},{"id":"-6260235547947855909","vin":"1C4RJGAG6PC648220","make":"Jeep","model":"Grand Cherokee","trim":"Laredo","body_style":"SUV","exterior_color":"Black","engine":"6 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":22,"year":2023,"price":43630,"mpg_city":19,"mpg_highway":26,"imageUrl":"https://img.vast.com/apollo/-6260235547947855909/1/640x-"},{"id":"1328306788217728868","vin":"1C6HJTAG5PL501043","make":"Jeep","model":"Gladiator","trim":"Sport","body_style":"Pickup","exterior_color":"Black","engine":"6 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":19,"year":2023,"price":47373,"mpg_city":17,"mpg_highway":22,"imageUrl":"https://img.vast.com/apollo/1328306788217728868/1/640x-"},{"id":"4842373748135033396","vin":"4S4WMAUD9P3437906","make":"Subaru","model":"Ascent","trim":"Limited","body_style":"SUV","exterior_color":"Silver","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":21,"year":2023,"mileage":2,"price":46655,"mpg_city":19,"mpg_highway":25,"imageUrl":"https://img.vast.com/apollo/4842373748135033396/1/640x-"},{"id":"4597235982606416850","vin":"4S4WMAHD9P3444476","make":"Subaru","model":"Ascent","trim":"Onyx Edition","body_style":"SUV","exterior_color":"Green","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":22,"year":2023,"mileage":8,"price":42520,"mpg_city":20,"mpg_highway":26,"imageUrl":"https://img.vast.com/apollo/4597235982606416850/1/640x-"},{"id":"2423554251870492633","vin":"4S4BTGND7R3112225","make":"Subaru","model":"Outback","trim":"Limited","body_style":"Wagon","exterior_color":"Blue","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":25,"year":2024,"mileage":7,"price":42700,"mpg_city":22,"mpg_highway":29,"imageUrl":"https://img.vast.com/apollo/2423554251870492633/1/640x-"},{"id":"3644084718618933067","vin":"1C6SRFJT6PN652541","make":"Ram","model":"1500","trim":"Laramie","body_style":"Pickup","exterior_color":"Black","engine":"8 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":19,"year":2023,"mileage":10,"price":59783,"mpg_city":17,"mpg_highway":22,"imageUrl":"https://img.vast.com/apollo/3644084718618933067/1/640x-"},{"id":"-6948266371532344148","vin":"4S4WMAKD8P3438421","make":"Subaru","model":"Ascent","trim":"Onyx Edition Limited","body_style":"SUV","exterior_color":"White","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":22,"year":2023,"mileage":2,"price":48346,"mpg_city":20,"mpg_highway":26,"imageUrl":"https://img.vast.com/apollo/-6948266371532344148/1/640x-"},{"id":"7650363564363900831","vin":"2C3CDZAGXPH600200","make":"Dodge","model":"Challenger","trim":"SXT","body_style":"Coupe","exterior_color":"Black","engine":"6 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":23,"year":2023,"mileage":5,"price":30800,"mpg_city":19,"mpg_highway":30,"imageUrl":"https://img.vast.com/apollo/7650363564363900831/1/640x-"},{"id":"-4576333870327692383","vin":"1GNERJKW8PJ275047","make":"Chevrolet","model":"Traverse","trim":"RS","body_style":"SUV","exterior_color":"Gray","engine":"6 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":21,"year":2023,"price":45295,"mpg_city":18,"mpg_highway":27,"imageUrl":"https://img.vast.com/apollo/-4576333870327692383/1/640x-"},{"id":"3870581139470513735","vin":"1GNSCGKL4PR386872","make":"Chevrolet","model":"Suburban","trim":"High Country","body_style":"SUV","exterior_color":"Black","engine":"8 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":16,"year":2023,"mileage":1,"price":83910,"mpg_city":14,"mpg_highway":20,"imageUrl":"https://img.vast.com/apollo/3870581139470513735/1/640x-"},{"id":"-5919058550258187097","vin":"KNDJ33AU3P7887416","make":"Kia","model":"Soul","trim":"EX","body_style":"Wagon","exterior_color":"Gray","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"New","year":2023,"mileage":4,"price":26135,"imageUrl":"https://img.vast.com/apollo/-5919058550258187097/1/640x-"},{"id":"-4855587414577851613","vin":"KNDC34LA7P5606814","make":"Kia","model":"EV6","trim":"Wind","body_style":"SUV","exterior_color":"Blue","engine":"Electric","transmission":"Automatic","drive_type":"RWD","fuel":"Electric","vehicle_condition":"New","mpg_combined":117,"year":2023,"mileage":15,"price":50550,"mpg_city":134,"mpg_highway":101,"imageUrl":"https://img.vast.com/apollo/-4855587414577851613/1/640x-"},{"id":"-5511671246644678398","vin":"1GTP6FEK2P1131414","make":"GMC","model":"Canyon","trim":"Denali","body_style":"Pickup","exterior_color":"Black","engine":"4 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","year":2023,"mileage":2,"price":54805,"imageUrl":"https://img.vast.com/apollo/-5511671246644678398/1/640x-"},{"id":"-7023442995322859274","vin":"1GCUDGEL4PZ300972","make":"Chevrolet","model":"Silverado 1500","trim":"LTZ","body_style":"Pickup","exterior_color":"Brown","engine":"8 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","year":2023,"price":66890,"imageUrl":"https://img.vast.com/apollo/-7023442995322859274/1/640x-"},{"id":"-2756452406958224279","vin":"1GNSKPKD9PR411552","make":"Chevrolet","model":"Tahoe","trim":"Z71","body_style":"SUV","exterior_color":"Black","engine":"8 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":16,"year":2023,"price":66990,"mpg_city":14,"mpg_highway":18,"imageUrl":"https://img.vast.com/apollo/-2756452406958224279/1/640x-"},{"id":"-8547364095261535065","vin":"3KPF24AD9PE643879","make":"Kia","model":"Forte","trim":"LX","body_style":"Sedan","exterior_color":"Black","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":32,"year":2023,"mileage":3,"price":21110,"mpg_city":28,"mpg_highway":39,"imageUrl":"https://img.vast.com/apollo/-8547364095261535065/1/640x-"},{"id":"-5479797038400680541","vin":"KNDCP3LE8P5090819","make":"Kia","model":"Niro","trim":"LX","body_style":"SUV","exterior_color":"Black","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Hybrid","vehicle_condition":"New","mpg_combined":49,"year":2023,"mileage":3,"price":28670,"mpg_city":53,"mpg_highway":45,"imageUrl":"https://img.vast.com/apollo/-5479797038400680541/1/640x-"},{"id":"3667649575214948866","vin":"3KPF24AD1PE645142","make":"Kia","model":"Forte","trim":"LXS","body_style":"Sedan","exterior_color":"Orange","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":32,"year":2023,"mileage":9,"price":21315,"mpg_city":28,"mpg_highway":39,"imageUrl":"https://img.vast.com/apollo/3667649575214948866/1/640x-"},{"id":"-3589431975058642788","vin":"JN8BT3DC2PW106225","make":"Nissan","model":"Rogue","trim":"Platinum","body_style":"SUV","exterior_color":"Black","engine":"3 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":33,"year":2023,"price":37365,"mpg_city":30,"mpg_highway":37,"imageUrl":"https://img.vast.com/apollo/-3589431975058642788/1/640x-"},{"id":"-8015072294543079780","vin":"3GNAXHEG8PL240891","make":"Chevrolet","model":"Equinox","trim":"LS","body_style":"SUV","exterior_color":"Black","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":28,"year":2023,"mileage":3,"price":28780,"mpg_city":26,"mpg_highway":31,"imageUrl":"https://img.vast.com/apollo/-8015072294543079780/1/640x-"},{"id":"-250796116143620565","vin":"1C6SRFJT1PN658523","make":"Ram","model":"1500","trim":"Laramie","body_style":"Pickup","exterior_color":"Gray","engine":"8 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":19,"year":2023,"price":64458,"mpg_city":17,"mpg_highway":22,"imageUrl":"https://img.vast.com/apollo/-250796116143620565/1/640x-"},{"id":"6455081926515488390","vin":"1C4RJHAG7PC620996","make":"Jeep","model":"Grand Cherokee","trim":"Laredo","body_style":"SUV","exterior_color":"Red","engine":"6 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":22,"year":2023,"mileage":12,"price":40037,"mpg_city":19,"mpg_highway":26,"imageUrl":"https://img.vast.com/apollo/6455081926515488390/1/640x-"},{"id":"8722176513116598104","vin":"JN8AZ2BE3P9307493","make":"Infiniti","model":"QX80","trim":"Sensory","body_style":"SUV","exterior_color":"Gray","engine":"8 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":15,"year":2023,"mileage":5,"price":90560,"mpg_city":13,"mpg_highway":19,"imageUrl":"https://img.vast.com/apollo/8722176513116598104/1/640x-"},{"id":"3509559560612406876","vin":"1GTRHAED0PZ271342","make":"GMC","model":"Sierra 1500","trim":"Pro","body_style":"Pickup","exterior_color":"Red","engine":"8 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Gasoline","vehicle_condition":"New","year":2023,"mileage":3,"price":50545,"imageUrl":"https://img.vast.com/apollo/3509559560612406876/1/640x-"},{"id":"-6501130464567925283","vin":"4S4BTACC3R3110771","make":"Subaru","model":"Outback","trim":"Premium","body_style":"Wagon","exterior_color":"Gray","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":28,"year":2024,"mileage":7,"price":33280,"mpg_city":26,"mpg_highway":32,"imageUrl":"https://img.vast.com/apollo/-6501130464567925283/1/640x-"},{"id":"9097664163304538951","vin":"JF2SKAMC4PH472826","make":"Subaru","model":"Forester","trim":"Wilderness","body_style":"SUV","exterior_color":"Blue","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":26,"year":2023,"mileage":5,"price":38911,"mpg_city":25,"mpg_highway":28,"imageUrl":"https://img.vast.com/apollo/9097664163304538951/1/640x-"},{"id":"3734425774397692385","vin":"4S4WMAWD2P3438442","make":"Subaru","model":"Ascent","trim":"Touring","body_style":"SUV","exterior_color":"Red","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":22,"year":2023,"mileage":2,"price":51131,"mpg_city":20,"mpg_highway":26,"imageUrl":"https://img.vast.com/apollo/3734425774397692385/1/640x-"},{"id":"-7153817088100806555","vin":"JF2SKARC8PH468805","make":"Subaru","model":"Forester","trim":"Touring","body_style":"SUV","exterior_color":"Green","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"New","mpg_combined":29,"year":2023,"mileage":3,"price":39747,"mpg_city":26,"mpg_highway":33,"imageUrl":"https://img.vast.com/apollo/-7153817088100806555/1/640x-"},{"id":"4597991649198143926","vin":"3VWN57BUXLM089834","make":"Volkswagen","model":"Jetta","trim":"R-Line","body_style":"Sedan","exterior_color":"White","engine":"4 Cyl","transmission":"Manual","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":34,"year":2020,"mileage":43299,"price":21477,"mpg_city":30,"mpg_highway":40,"imageUrl":"https://img.vast.com/apollo/4597991649198143926/1/640x-"},{"id":"8695736304169807392","vin":"JF2SKACC4NH407652","make":"Subaru","model":"Forester","body_style":"SUV","exterior_color":"Blue","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"CPO","mpg_combined":29,"year":2022,"mileage":11692,"price":29043,"mpg_city":26,"mpg_highway":33,"imageUrl":"https://img.vast.com/apollo/8695736304169807392/1/640x-"},{"id":"-6179833972011787469","vin":"4S4BTGPD6L3170086","make":"Subaru","model":"Outback","trim":"Touring","body_style":"Wagon","exterior_color":"Black","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":26,"year":2020,"mileage":23615,"price":35000,"mpg_city":23,"mpg_highway":30,"imageUrl":"https://img.vast.com/apollo/-6179833972011787469/1/640x-"},{"id":"8195537461656882956","vin":"JTENU5JR2M5925551","make":"Toyota","model":"4Runner","trim":"SR5","body_style":"SUV","exterior_color":"Silver","engine":"6 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":17,"year":2021,"mileage":43066,"price":38739,"mpg_city":16,"mpg_highway":19,"imageUrl":"https://img.vast.com/apollo/8195537461656882956/1/640x-"},{"id":"-274458240007713452","vin":"JA4ARUAU7MU035503","make":"Mitsubishi","model":"Outlander Sport","trim":"ES","body_style":"SUV","exterior_color":"Gray","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"CPO","mpg_combined":26,"year":2021,"mileage":35868,"price":19989,"mpg_city":23,"mpg_highway":29,"imageUrl":"https://img.vast.com/apollo/-274458240007713452/1/640x-"},{"id":"-8977175611041292638","vin":"WBAGV2C02NCG90489","make":"BMW","model":"8 Series","trim":"840i","body_style":"Sedan","exterior_color":"White","engine":"6 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":25,"year":2022,"mileage":8821,"price":71990,"mpg_city":22,"mpg_highway":29,"imageUrl":"https://img.vast.com/apollo/-8977175611041292638/1/640x-"},{"id":"-8607259219994949633","vin":"2C3CDXCT8GH163117","make":"Dodge","model":"Charger","trim":"R/T","body_style":"Sedan","exterior_color":"Purple","engine":"8 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":19,"year":2016,"mileage":39566,"price":26995,"mpg_city":16,"mpg_highway":25,"imageUrl":"https://img.vast.com/apollo/-8607259219994949633/1/640x-"},{"id":"-3056009774971440370","vin":"5N1DR2MN5KC626035","make":"Nissan","model":"Pathfinder","trim":"S","body_style":"SUV","exterior_color":"White","engine":"6 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":23,"year":2019,"mileage":75359,"price":20489,"mpg_city":20,"mpg_highway":27,"imageUrl":"https://img.vast.com/apollo/-3056009774971440370/1/640x-"},{"id":"-4280757674748995982","vin":"4S4WMARD2L3450824","make":"Subaru","model":"Ascent","trim":"Touring","body_style":"SUV","exterior_color":"Brown","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"CPO","mpg_combined":23,"year":2020,"mileage":25170,"price":38991,"mpg_city":21,"mpg_highway":27,"imageUrl":"https://img.vast.com/apollo/-4280757674748995982/1/640x-"},{"id":"-8974446307712235184","vin":"3N1CN8EV8LL847845","make":"Nissan","model":"Versa","trim":"SV","body_style":"Sedan","exterior_color":"Silver","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":35,"year":2020,"mileage":93519,"price":16472,"mpg_city":32,"mpg_highway":40,"imageUrl":"https://img.vast.com/apollo/-8974446307712235184/1/640x-"},{"id":"4270115996258092252","vin":"1FTEW1C51LKD50537","make":"Ford","model":"F-150","trim":"XLT","body_style":"Pickup","exterior_color":"Black","engine":"8 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Flexible-Fuel","vehicle_condition":"Used","year":2020,"mileage":65625,"price":32589,"imageUrl":"https://img.vast.com/apollo/4270115996258092252/1/640x-"},{"id":"477337373246561303","vin":"5N1DR3BC8NC217751","make":"Nissan","model":"Pathfinder","trim":"SV","body_style":"SUV","exterior_color":"White","engine":"6 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":23,"year":2022,"mileage":42569,"price":32801,"mpg_city":21,"mpg_highway":27,"imageUrl":"https://img.vast.com/apollo/477337373246561303/1/640x-"},{"id":"-6017338311701475009","vin":"4JGFF5KEXNA728114","make":"Mercedes-Benz","model":"GLS","trim":"450","body_style":"SUV","exterior_color":"White","engine":"6 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":20,"year":2022,"mileage":16899,"price":76950,"mpg_city":18,"mpg_highway":24,"imageUrl":"https://img.vast.com/apollo/-6017338311701475009/1/640x-"},{"id":"-5982142129621475064","vin":"7FART6H54LE006685","make":"Honda","model":"CR-V","trim":"EX","body_style":"SUV","exterior_color":"Blue","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Hybrid","vehicle_condition":"Used","mpg_combined":38,"year":2020,"mileage":67245,"price":27987,"mpg_city":40,"mpg_highway":35,"imageUrl":"https://img.vast.com/apollo/-5982142129621475064/1/640x-"},{"id":"-7504487931371202397","vin":"1GTG5CEN1N1292006","make":"GMC","model":"Canyon","trim":"Elevation","body_style":"Pickup","exterior_color":"Black","engine":"6 Cyl","transmission":"Automatic","drive_type":"RWD","fuel":"Gasoline","vehicle_condition":"CPO","mpg_combined":21,"year":2022,"mileage":8157,"price":36864,"mpg_city":18,"mpg_highway":25,"imageUrl":"https://img.vast.com/apollo/-7504487931371202397/1/640x-"},{"id":"311779080457225148","vin":"JF2GTHNC0PH254988","make":"Subaru","model":"Crosstrek","trim":"Limited","body_style":"SUV","exterior_color":"Silver","engine":"4 Cyl","transmission":"Automatic","drive_type":"AWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":29,"year":2023,"mileage":2803,"price":33988,"mpg_city":27,"mpg_highway":34,"imageUrl":"https://img.vast.com/apollo/311779080457225148/1/640x-"},{"id":"-7758937921048833134","vin":"1GCUDJEL8NZ591440","make":"Chevrolet","model":"Silverado 1500","trim":"High Country","body_style":"Pickup","exterior_color":"White","engine":"8 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"Used","year":2022,"mileage":17352,"price":73997,"imageUrl":"https://img.vast.com/apollo/-7758937921048833134/1/640x-"},{"id":"3281952460096257895","vin":"1FM5K8GC4LGA91084","make":"Ford","model":"Explorer","trim":"ST","body_style":"SUV","exterior_color":"White","engine":"6 Cyl","transmission":"Automatic","drive_type":"4WD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":20,"year":2020,"mileage":57586,"price":40499,"mpg_city":18,"mpg_highway":24,"imageUrl":"https://img.vast.com/apollo/3281952460096257895/1/640x-"},{"id":"7537671464815954519","vin":"1G1ZD5ST2NF135042","make":"Chevrolet","model":"Malibu","trim":"LT","body_style":"Sedan","exterior_color":"Blue","engine":"4 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":32,"year":2022,"mileage":35831,"price":22660,"mpg_city":29,"mpg_highway":36,"imageUrl":"https://img.vast.com/apollo/7537671464815954519/1/640x-"},{"id":"-8438826015809854882","vin":"5N1AZ2BJ8LN144569","make":"Nissan","model":"Murano","trim":"SV","body_style":"SUV","exterior_color":"Silver","engine":"6 Cyl","transmission":"Automatic","drive_type":"FWD","fuel":"Gasoline","vehicle_condition":"Used","mpg_combined":23,"year":2020,"mileage":43173,"price":22679,"mpg_city":20,"mpg_highway":28,"imageUrl":"https://img.vast.com/apollo/-8438826015809854882/1/640x-"}]}
        """
    vechiles = find_matching_data(vechile_ids, json_data)
    # # Prepare and return the response
    # response = {
    #     'vin': parsed_data.get('vin'),
    #     'make': parsed_data.get('make'),
    #     'model': parsed_data.get('model'),
    #     'trim': parsed_data.get('trim'),
    #     'body_style': parsed_data.get('body_style'),
    #     'dealer': {
    #         'name': parsed_data.get('dealer', {}).get('name')
    #     }
    # }

    return jsonify(vechiles), 200

def extract_ids(string):
    try:
        data = json.loads(string)
        ids = [item["id"] for item in data]
        return ids
    except (json.JSONDecodeError, KeyError):
        return []

if __name__ == '__main__':
    app.run()
